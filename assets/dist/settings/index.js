(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1299:function(e,t,a){"use strict";a.r(t);var n=a(14),s=a.n(n),r=a(15),o=a.n(r),i=a(10),c=a.n(i),l=a(16),p=a.n(l),u=a(17),m=a.n(u),d=a(9),f=a.n(d),_=a(0),b=a(5),g=a(22),h=a(20),w=(a(68),a(3)),v=function(e){return function(t){t(function(e){return{type:"POS_PRINTERS",printers:e}}({list:[{a4:"A4 Printer"},{a3:"A3 Printer"},{T88V:"Epson TM-T88V Thermal Printer"},{a5:"A5 Printer"},{a6:"A6 Printer"}],isFetching:1,default:e})),jQuery.confirm({title:w.a.confirmation_text,icon:"fa fa-question-circle",animation:"scale",closeAnimation:"scale",opacity:.5,content:w.a.setting_update_success_text,buttons:{confirm:{text:w.a.okay_text,btnClass:"pos-btn-primary",action:function(){jQuery(".pos-left-wrap ul li").eq(0).trigger("click")}}}})}},y=a(7),O=a(12),j=function(e){return function(){var t,a;""!=apif_script.logged_in&&(t=e,a={form_data:JSON.stringify(t)},new Promise((function(e,t){document.querySelector("#loading-text").innerHTML=w.a.upadting_manager_text,document.querySelector("#loader").style.display="block",Object(O.POSPostRequest)(y.a.WK_UPDATE_MANAGER_ENDPOINT,a).then((function(t){document.querySelector("#loader").style.display="none",e(t.response)}))}))).then((function(e){e?jQuery.confirm({title:w.a.confirmation_text,icon:"fa fa-question-circle",animation:"scale",closeAnimation:"scale",opacity:.5,content:w.a.account_update_success_text,buttons:{confirm:{text:w.a.okay_text,btnClass:"pos-btn-primary",action:function(){}}}}):jQuery.confirm({title:w.a.err_text,content:w.a.error_keyword,autoClose:"cancelAction|3000",type:"red",escapeKey:"cancelAction",buttons:{cancelAction:{text:w.a.cancel_btn_text,btnClass:"pos-btn-primary"}}})}))}};a(960);var E=a(248),S=a(23),N=a(2);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var s=f()(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return m()(this,a)}}var x=function(e){p()(a,e);var t=C(a);function a(e){var n;return s()(this,a),(n=t.call(this,e)).state={fields:{"pos-user-fname":"","pos-user-lname":"","pos-user-email":"","pos-user-ppwd":"","pos-user-npwd":"","pos-user-cpwd":""},errors:{}},n.handleChange=n.handleChange.bind(c()(n)),n.contactSubmit=n.contactSubmit.bind(c()(n)),n.settingsSubmit=n.settingsSubmit.bind(c()(n)),n}return o()(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(E.a)())}},{key:"componentWillReceiveProps",value:function(e){var t=e.user;this.setState({fields:{"pos-user-fname":t.first_name,"pos-user-lname":t.last_name,"pos-user-email":t.email},code:"USD"})}},{key:"contactSubmit",value:function(e){if(e.preventDefault(),navigator.onLine){var t=this.props.dispatch,a=this.state.fields,n={},s=!0,r=(w.a.pos_first_name_empty_validation,w.a.pos_last_name_empty_validation,w.a.pos_new_pswd_empty_validation),o=w.a.pos_old_pswd_empty_validation,i=w.a.pos_cnf_pswd_empty_validation,c=w.a.pos_cnf_pswd_same_validation;a["pos-user-ppwd"]&&(a["pos-user-npwd"]||(s=!1,n["pos-user-npwd"]=r),a["pos-user-cpwd"]||(s=!1,n["pos-user-cpwd"]=i),a["pos-user-npwd"]&&a["pos-user-cpwd"]&&a["pos-user-npwd"]!=a["pos-user-cpwd"]&&(s=!1,n["pos-user-cpwd"]=c)),a["pos-user-npwd"]&&(a["pos-user-ppwd"]||(s=!1,n["pos-user-ppwd"]=o),a["pos-user-cpwd"]||(s=!1,n["pos-user-cpwd"]=i)),a["pos-user-cpwd"]&&(a["pos-user-npwd"]||(s=!1,n["pos-user-ppwd"]=o),a["pos-user-npwd"]||(s=!1,n["pos-user-npwd"]=i)),this.setState({errors:n}),s&&t(j(a))}else jQuery.confirm({title:w.a.warning_text,content:w.a.error_offline_account,backgroundDismiss:function(){return"buttonName"},Okay:{text:w.a.okay_text,btnClass:"pos-btn-primary"}})}},{key:"handleChange",value:function(e){var t=this.state.fields;t[e.target.name]=e.target.value,this.setState({fields:t})}},{key:"settingsSubmit",value:function(e,t){var a=this.props.dispatch;e.preventDefault(),t&&jQuery.each(t,(function(e,t){if(null!=t.name)switch(t.name){case"printer":a(v(t.value))}}))}},{key:"render",value:function(){var e=this,t=this.props.user,a=this.props.printers,n=[],s=t.first_name?t.first_name:this.state.fields["pos-user-fname"],r=w.a.first_name,o=w.a.last_name,i=w.a.account_settings,c=w.a.other_settings,l=w.a.email_text,p=w.a.previous_password,u=w.a.new_password,m=w.a.confirm_password,d=w.a.update_account,f=w.a.select_language,b=w.a.english,g=w.a.save_settings,h=w.a.select_invoice_printer,v=this.props.page.name,O="wkwcpos-tabs",j="wkwcpos-tabs";switch(v){case"Settings":case"Account Settings":O+=" pos-active";break;case"Other Settings":j+=" pos-active"}""==t.profile_pic?apif_script.assets:t.profile_pic;var E=t.last_name?t.last_name:this.state.fields["pos-user-lname"],C=t.email?t.email:this.state.fields["pos-user-email"];if(null!=a&&Object.keys(a).length>0){var x=a.default;jQuery.each(a.list,(function(e,t){n.push(Object(_.createElement)("option",{key:e,value:Object.keys(t)[0],dangerouslySetInnerHTML:{__html:Object.values(t)[0]}}))}))}return Object(_.createElement)("div",{className:"pos-settings pos-tabContent",id:"pos-settings"},Object(_.createElement)("div",{className:"pos-2-col"},Object(_.createElement)("nav",{className:"pos-tabs"},Object(_.createElement)("ul",null,Object(_.createElement)("li",null,Object(_.createElement)(S.a,{className:O,to:y.a.HOME_URL+"/pos/settings/tab/account"},i)),Object(_.createElement)("li",null,Object(_.createElement)(S.a,{className:j,to:y.a.HOME_URL+"/pos/settings/tab/other"},c))))),Object(_.createElement)("div",{className:"pos-2-col"},"Settings"==v||"Account Settings"==v?Object(_.createElement)("div",{className:"postabContainer",id:"account-setting-tab"},Object(_.createElement)("div",{className:"pos-setting-box"},Object(_.createElement)("form",{id:"save-pos-user-edit",onSubmit:function(t){return e.contactSubmit(t)}},Object(_.createElement)("div",null,Object(_.createElement)("label",{htmlFor:"pos-user-fname"},r),Object(_.createElement)("input",{id:"pos-user-fname",type:"text",name:"pos-user-fname",autoComplete:"true",defaultValue:s,onChange:function(t){return e.handleChange(t)}}),Object(_.createElement)("span",{className:"error"},this.state.errors["pos-user-fname"]),Object(_.createElement)("label",{htmlFor:"pos-user-lname"},o),Object(_.createElement)("input",{id:"pos-user-lname",type:"text",name:"pos-user-lname",autoComplete:"true",defaultValue:E,onChange:function(t){return e.handleChange(t)}}),Object(_.createElement)("span",{className:"error"},this.state.errors["pos-user-lname"]),Object(_.createElement)("label",{htmlFor:"pos-user-email"},l),Object(_.createElement)("input",{type:"text",id:"pos-user-email",name:"pos-user-email",autoComplete:"true",onChange:function(t){return e.handleChange(t)},defaultValue:C,disabled:!0}),Object(_.createElement)("span",{className:"error"},this.state.errors["pos-user-email"]),Object(_.createElement)("label",{htmlFor:"pos-user-ppwd"},p),Object(_.createElement)("input",{id:"pos-user-ppwd",name:"pos-user-ppwd",placeholder:Object(N.__)("Previous Password","wc_pos"),autoComplete:"true",type:"password",onChange:function(t){return e.handleChange(t)},defaultValue:this.state.fields["pos-user-ppwd"]}),Object(_.createElement)("span",{className:"error"},this.state.errors["pos-user-ppwd"]),Object(_.createElement)("label",{htmlFor:"pos-user-npwd"},u),Object(_.createElement)("input",{id:"pos-user-npwd",name:"pos-user-npwd",placeholder:Object(N.__)("New Password","wc_pos"),type:"password",autoComplete:"true",onChange:function(t){return e.handleChange(t)},defaultValue:this.state.fields["pos-user-npwd"]}),Object(_.createElement)("span",{className:"error"},this.state.errors["pos-user-npwd"]),Object(_.createElement)("label",{htmlFor:"pos-user-cpwd"},m),Object(_.createElement)("input",{id:"pos-user-cpwd",name:"pos-user-cpwd",placeholder:Object(N.__)("Confirm Password","wc_pos"),autoComplete:"true",type:"password",onChange:function(t){return e.handleChange(t)},defaultValue:this.state.fields["pos-user-cpwd"]}),Object(_.createElement)("span",{className:"error"},this.state.errors["pos-user-cpwd"])),Object(_.createElement)("div",{className:"pos-user-save"},Object(_.createElement)("button",{name:"save-pos-user",type:"submit",className:"save-pos-user primary"},d))))):Object(_.createElement)("div",{className:"postabContainer",id:"other-setting-tab"},Object(_.createElement)("div",{className:"pos-setting-box"},Object(_.createElement)("form",{id:"save-pos-settings",onSubmit:function(t){return e.settingsSubmit(t,jQuery("#save-pos-settings").serializeArray())}},Object(_.createElement)("div",{className:"form-group"},Object(_.createElement)("label",{className:"control-label",htmlFor:"input-langauge"},f),Object(_.createElement)("select",{className:"form-control",name:"language",id:"input-language"},Object(_.createElement)("option",{value:"en-gb",defaultValue:"selected"},b))),Object(_.createElement)("div",{className:"form-group",id:"select-printer"},Object(_.createElement)("label",{className:"control-label",htmlFor:"input-printer"},h),Object(_.createElement)("select",{className:"form-control",name:"printer",defaultValue:x,id:"input-printer"},n)),Object(_.createElement)("div",{className:"pos-save-settings"},Object(_.createElement)("button",{name:"save-pos-settings",type:"submit",className:"save-pos-settings primary"},g)))))))}}]),a}(b.Component);t.default=Object(g.b)((function(e){return{user:e.cashier,printers:e.printers}}),(function(e){return Object.assign({dispatch:e},Object(h.bindActionCreators)({SaveManager:j,UpdateDefaultPrinterWC:v},e))}))(x)},248:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c}));var n=a(3),s=a(6),r=a(2),o=function(e){return{type:"LOGGIN_USER",user:e}},i=function(){return function(e){var t=apif_script.logged_in,a=apif_script.logout_url;if(""!=t){var n={first_name:t.fname,last_name:t.lname,email:t.email,isLoggedIn:!0,cashier_id:t.user_id,profile_pic:t.profile_pic,isFetching:1,logout_url:a,opening_amount:parseFloat(0)};e(o(n))}}},c=function(){return function(e){var t=apif_script.logged_in,a=apif_script.logout_url;if(""!=t&&void 0===localStorage.cashdrawer)if(Object(s.applyFilters)("wkwcpos_show_set_drawer_amount_popup",!0))jQuery.confirm({title:n.a.drawer_text,content:'<div><div class="form-group"><input autofocus type="text" id="input-drawer" placeholder="'+n.a.validated_text+'" class="form-control"></div></div>',buttons:{apply:{text:n.a.okay_text,btnClass:"btn-global",action:function(){var s=this.$content.find("input#input-drawer");if(!s.val().trim()||s.val().length>15||0==/^-?(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(s.val())||parseFloat(s.val())<0)return jQuery.alert({content:n.a.drawer_validate_text,type:"red"}),!1;var r=s.val();if(r&&(null==localStorage.cashdrawer||""==localStorage.cashdrawer||"{}"==localStorage.cashdrawer)){var i={};if(i.initialAmount={initialAmount:r},localStorage.cashdrawer=JSON.stringify(i),""!=t){var c={first_name:t.fname,last_name:t.lname,email:t.email,isLoggedIn:!0,cashier_id:t.user_id,profile_pic:t.profile_pic,isFetching:1,logout_url:a,opening_amount:r};e(o(c))}}}},later:{text:Object(r.__)("Later","wc_pos"),action:function(){}}}});else{var i=Object(s.applyFilters)("wkwcpos_set_default_opening_amount_filter",0);if(i&&(null==localStorage.cashdrawer||""==localStorage.cashdrawer||"{}"==localStorage.cashdrawer)){var c={};if(c.initialAmount={initialAmount:i},localStorage.cashdrawer=JSON.stringify(c),""!=t){var l={first_name:t.fname,last_name:t.lname,email:t.email,isLoggedIn:!0,cashier_id:t.user_id,profile_pic:t.profile_pic,isFetching:1,logout_url:a,opening_amount:i};e(o(l))}}}}}},960:function(e,t,a){}}]);