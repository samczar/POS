{"version":3,"sources":["E:/www/wordpress/wp-content/plugins/woo-point-of-sale/packages/navigation/src/test/filters.js"],"names":["config","with_select","labels","add","rules","value","input","component","options","with_search","with_no_rules","describe","it","key","expect","toBe","query","with_select_is","with_search_includes","activeFilters","Array","isArray","toBeTruthy","length","rule","toEqual","toBeUndefined","status","nextQuery","status_is","things_includes","customer","undefined","valid_date_between","toBeDefined","invalid_date_1_between","invalid_date_2_between","currentFilter","defaultOption"],"mappings":"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","sourcesContent":["/** @format */\n/**\n * Internal dependencies\n */\nimport {\n\tgetActiveFiltersFromQuery,\n\tgetDefaultOptionValue,\n\tgetQueryFromActiveFilters,\n\tgetUrlKey,\n} from '../filters';\n\nconst config = {\n\twith_select: {\n\t\tlabels: { add: 'Order Status' },\n\t\trules: [ { value: 'is' } ],\n\t\tinput: {\n\t\t\tcomponent: 'SelectControl',\n\t\t\toptions: [ { value: 'pending' } ],\n\t\t},\n\t},\n\twith_search: {\n\t\tlabels: { add: 'Search' },\n\t\trules: [ { value: 'includes' } ],\n\t\tinput: {\n\t\t\tcomponent: 'Search',\n\t\t},\n\t},\n\twith_no_rules: {\n\t\tlabels: { add: 'Order Status' },\n\t\tinput: {\n\t\t\tcomponent: 'SelectControl',\n\t\t\toptions: [ { value: 'pending' } ],\n\t\t},\n\t},\n};\n\ndescribe( 'getUrlKey', () => {\n\tit( 'should return a correctly formatted string', () => {\n\t\tconst key = getUrlKey( 'key', 'rule' );\n\t\texpect( key ).toBe( 'key_rule' );\n\t} );\n\n\tit( 'should return a correctly formatted string with no rule', () => {\n\t\tconst key = getUrlKey( 'key' );\n\t\texpect( key ).toBe( 'key' );\n\t} );\n} );\n\ndescribe( 'getActiveFiltersFromQuery', () => {\n\tit( 'should return activeFilters from a query', () => {\n\t\tconst query = {\n\t\t\twith_select_is: 'pending',\n\t\t\twith_search_includes: '1,2,3',\n\t\t\twith_no_rules: 'pending',\n\t\t};\n\n\t\tconst activeFilters = getActiveFiltersFromQuery( query, config );\n\t\texpect( Array.isArray( activeFilters ) ).toBeTruthy();\n\t\texpect( activeFilters.length ).toBe( 3 );\n\n\t\t// with_select\n\t\tconst with_select = activeFilters[ 0 ];\n\t\texpect( with_select.key ).toBe( 'with_select' );\n\t\texpect( with_select.rule ).toBe( 'is' );\n\t\texpect( with_select.value ).toBe( 'pending' );\n\n\t\t// with_search\n\t\tconst with_search = activeFilters[ 1 ];\n\t\texpect( with_search.key ).toBe( 'with_search' );\n\t\texpect( with_search.rule ).toBe( 'includes' );\n\t\texpect( with_search.value ).toEqual( '1,2,3' );\n\n\t\t// with_search\n\t\tconst with_no_rules = activeFilters[ 2 ];\n\t\texpect( with_no_rules.key ).toBe( 'with_no_rules' );\n\t\texpect( with_no_rules.rule ).toBeUndefined();\n\t\texpect( with_no_rules.value ).toEqual( 'pending' );\n\t} );\n\n\tit( 'should ignore irrelevant query parameters', () => {\n\t\tconst query = {\n\t\t\twith_select: 'pending', // no rule associated\n\t\t\tstatus: 45,\n\t\t};\n\n\t\tconst activeFilters = getActiveFiltersFromQuery( query, config );\n\t\texpect( activeFilters.length ).toBe( 0 );\n\t} );\n\n\tit( 'should return an empty array with no relevant parameters', () => {\n\t\tconst query = {};\n\n\t\tconst activeFilters = getActiveFiltersFromQuery( query, config );\n\t\texpect( Array.isArray( activeFilters ) ).toBe( true );\n\t\texpect( activeFilters.length ).toBe( 0 );\n\t} );\n} );\n\ndescribe( 'getQueryFromActiveFilters', () => {\n\tit( 'should return a query object from activeFilters', () => {\n\t\tconst activeFilters = [\n\t\t\t{ key: 'status', rule: 'is', value: 'open' },\n\t\t\t{\n\t\t\t\tkey: 'things',\n\t\t\t\trule: 'includes',\n\t\t\t\tvalue: '1,2,3',\n\t\t\t},\n\t\t\t{ key: 'customer', value: 'new' },\n\t\t];\n\n\t\tconst query = {};\n\t\tconst nextQuery = getQueryFromActiveFilters( activeFilters, query, config );\n\t\texpect( nextQuery.status_is ).toBe( 'open' );\n\t\texpect( nextQuery.things_includes ).toBe( '1,2,3' );\n\t\texpect( nextQuery.customer ).toBe( 'new' );\n\t} );\n\n\tit( 'should remove parameters from the previous filters', () => {\n\t\tconst activeFilters = [];\n\t\tconst query = {\n\t\t\twith_select_is: 'complete',\n\t\t\twith_search_includes: '45',\n\t\t};\n\n\t\tconst nextQuery = getQueryFromActiveFilters( activeFilters, query, config );\n\t\texpect( nextQuery.with_select_is ).toBeUndefined();\n\t\texpect( nextQuery.with_search_includes ).toBeUndefined();\n\t} );\n\n\tit( 'should only reflect complete filters with multiple values', () => {\n\t\tconst activeFilters = [\n\t\t\t{ key: 'valid_date', rule: 'between', value: [ '2018-04-04', '2018-04-10' ] },\n\t\t\t{ key: 'invalid_date_1', rule: 'between', value: [ '2018-04-04', undefined ] },\n\t\t\t{ key: 'invalid_date_2', rule: 'between', value: '2018-04-04' },\n\t\t];\n\t\tconst query = {};\n\t\tconst nextQuery = getQueryFromActiveFilters( activeFilters, query, config );\n\n\t\texpect( nextQuery.valid_date_between ).toBeDefined();\n\t\texpect( nextQuery.invalid_date_1_between ).toBeUndefined();\n\t\texpect( nextQuery.invalid_date_2_between ).toBeUndefined();\n\t} );\n} );\n\ndescribe( 'getDefaultOptionValue', () => {\n\tit( 'should return the default option value', () => {\n\t\tconst options = [ { value: 'new' }, { value: 'returning' } ];\n\t\tconst currentFilter = {\n\t\t\tlabels: { add: 'Customer Type' },\n\t\t\tinput: {\n\t\t\t\tcomponent: 'SelectControl',\n\t\t\t\toptions,\n\t\t\t\tdefaultOption: 'returning',\n\t\t\t},\n\t\t};\n\t\tconst value = getDefaultOptionValue( currentFilter, options );\n\t\texpect( value ).toBe( 'returning' );\n\t} );\n\n\tit( 'should return the first option value when no default option', () => {\n\t\tconst options = [ { value: 'new' }, { value: 'returning' } ];\n\t\tconst currentFilter = {\n\t\t\tlabels: { add: 'Customer Type' },\n\t\t\tinput: {\n\t\t\t\tcomponent: 'SelectControl',\n\t\t\t\toptions,\n\t\t\t},\n\t\t};\n\t\tconst value = getDefaultOptionValue( currentFilter, options );\n\t\texpect( value ).toBe( 'new' );\n\t} );\n\n\tit( 'should return undefined when no options are provided', () => {\n\t\tconst options = [];\n\t\tconst currentFilter = {\n\t\t\tlabels: { add: 'Product' },\n\t\t\tinput: {\n\t\t\t\tcomponent: 'Search',\n\t\t\t},\n\t\t};\n\t\tconst value = getDefaultOptionValue( currentFilter, options );\n\t\texpect( value ).toBeUndefined();\n\t} );\n} );\n"]}